USE `environment`;

DROP procedure IF EXISTS `spCreateUser`;

DELIMITER $$
USE `environment`$$
CREATE PROCEDURE `spCreateUser` (
IN p_Username varchar(50),
IN p_Password varchar(50),
IN p_Email varchar(50),
IN p_Phone varchar(20)
)
BEGIN

if ( select exists (select 1 from users where Email = p_Email) ) THEN

    select 'Email already taken !!';

ELSE

insert into users
(
    UserName,
	Email,
    Password,
	Phone
)
values
(
    p_Username,
	p_Email,
    p_Password,
	p_Phone
);

END IF;

END$$

DELIMITER ;